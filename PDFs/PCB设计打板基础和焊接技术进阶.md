本文由宋宣增在2025/6/21在 [Obsidian](https://obsidian.md/) 中完成。结合Table of Contents和Better ExportPDF插件
Copyright © 2025 XuanZeng Song
This article is licensed under the MIT License.

# Table of Contents
[[#0. 什么是PCB？为什么要给大家介绍PCB？]]
[[#1. 嘉立创“全家桶”的下载]]
[[#2. EDA的推荐初始设置]]
[[#3. 新建工程及基本界面介绍]]
[[#4. 从立创商城中查询元器件—经典741为例]]
[[#5. DRC检查(原理图阶段)]]
[[#6. 后端布线—初步介绍]]
[[#7. 后端布线—放置板框和元器件]]
[[#8.后端布线—推荐设置和注意事项]]
[[#9. 后端布线—丝印标注]]
[[#10. 导出Gerber文件]]
附录：
- [[#A. 差分对布线|A. 差分对布线]]
	- [[#A. 差分对布线#A.1 什么是差分对？为什么要有差分对？|A.1 什么是差分对？为什么要有差分对？]]
	- [[#A. 差分对布线#A.2 差分布线|A.2 差分布线]]
		- [[#A.2.0 开源项目的导入、使用开源项目的注意事项|A.2.0 开源项目的导入、使用开源项目的注意事项]]
		- [[#A.2 差分布线#A.2.1 定义差分对|A.2.1 定义差分对]]
		- [[#A.2 差分布线#A.2.2 差分布线实例以及注意事项|A.2.2 差分布线实例以及注意事项]]
- [[#B. 多层板设计|B. 多层板设计]]
	- [[#A.2 差分布线#B.1 更改为多层板|B.1 更改为多层板]]
	- [[#A.2 差分布线#B.2 多层线设置建议|B.2 多层线设置建议]]
- [[#C. MCU芯片放置|C. MCU芯片放置]]
	- [[#A.2 差分布线#C.1 去耦电容|C.1 去耦电容]]
	- [[#A.2 差分布线#C.2 外部晶振|C.2 外部晶振]]
		- [[#C.2 外部晶振#C.2.1 选择合适的晶振和负载电容|C.2.1 选择合适的晶振和负载电容]]
		- [[#C.2 外部晶振#C.2.2 晶振布线须知|C.2.2 晶振布线须知]]
	- [[#A.2 差分布线#C.3 一些题外话|C.3 一些题外话]]
- [[#D. 如何创建你自己的器件？（**不推荐**）|D. 如何创建你自己的器件？（**不推荐**）]]
- [[#E. 推荐学习链接|E. 推荐学习链接]]
	- [[#E. 推荐学习链接#E.1 差分对布线：|E.1 差分对布线：]]
	- [[#E. 推荐学习链接#E.2 你的同学and the Internet~|E.2 你的同学and the Internet~]]

[[#Ending:寄语|Ending:寄语]]
[[#Please|Please]]
# 0. 什么是PCB？为什么要给大家介绍PCB？

PCB（Printed Circuit Board）印刷电路板，主体是覆铜板（一般是有机材料，比如经典的FR-4）夹着铜箔，通过蚀刻（类比芯片的制作）在阻焊膜上蚀刻出特定线路，然后溶解掉剩下没有阻焊膜保护的铜箔部分，从而实现指定电气连接的技术。（下面是几张从网上找到的图片）
![alt text](image-12.png)

![alt text](image-13.png)

在电电实验中，大家应该都刚刚使用过老师为我们准备的一体式器件：比如滤波器、放大电路、陷波器这些，而那些绿色的板子就是PCB技术的应用成果。
![alt text](image-14.png)

![alt text](image-15.png)

此外，PCB在我们生活中其实无处不在，简单到宿舍里的空调遥控器，精细到你的电脑主板，本质上都是PCB。和其他电电实验中的“一团乱麻”相比，PCB显得非常**简洁明了**。不必担心杜邦线的松动，不必担心接线因为一个眼花而接错。综上原因，我们希望能让更多的同学学会PCB的绘制和相关的进阶焊接。让大家的作品**更加精巧，更加稳定**。

这里我从B站视频中截取了一张PCB设计的整体流程：
![alt text](image-61.png)

我们将会带着大家了解这里的整个流程（新建器件部分我放在了附录中来说，我个人不推荐大家新接触PCB设计就去自己设计元器件封装、符号这些，非常没必要）

---
# 1. 嘉立创“全家桶”的下载

我们主要使用到的软件和网站如下
1. [嘉立创EDA专业版(客户端)](https://lceda.cn/)
2. [嘉立创下单助手(客户端)](https://www.jlc.com/)
3. [立创开源硬件平台(网站)](https://oshwhub.com/)
4. [立创商城(网站)](https://www.szlcsc.com/)

**注意⚠️**：这里只推荐大家下载对应OS版本下的**最新专业版**（完全免费），因为我从来没用过标准版，无法保证此讲义能无损地映射到标准版的操作。
![[Pasted image 20250620223507.png]]

为什么我们不向大家介绍Altium Designer这些更加“高大上”的软件？~~因为我不太会。~~ 原因有下面几点：
**第一**，和工业界中最为常见的Altium Designer相比，嘉立创EDA**完全免费**，而AD需要使用学生优惠才能免费使用，并且这个学生优惠的认定还是有点麻烦的（我的印象中），不如嘉立创EDA**开盒即用**，非常方便。
**第二**，和AD相比，立创开源硬件平台和立创EDA适配性更好，基本上只要下载工程包并导入即可使用。**方便大家从开源验证的项目中学习设计和布线经验**，快速进步。
**第三**，立创EDA的**元件库非常庞大且方便使用**（熟练之后），而AD的元件库可能需要从嘉立创这边下载元器件的参数文件再导入AD中，相对麻烦不少。

下载和安装部分，对安装位置没有什么特殊要求，大家自己使用方便就行。

---
# 2. EDA的推荐初始设置
下载并安装完EDA之后，这里推荐大家在上面边框->设置->客户端中将运行模式切换成**在线模式**（如下图）
（个人比较喜欢把工程完全放在云端。不过如果你设计的时候周围的网络非常不好，可以设置为半离线设计，这样工程就是保存在本地的）

![alt text](image-1.png)

![alt text](image.png)
（下面全是按照在线模式进行的操作，不过除了界面会有非常小的区别外，并无本质区别，同学们可以非常轻松的对应到半离线模式。）

---
# 3. 新建工程及基本界面介绍
然后看到左边“所有工程”界面，可以在此右键->新建工程
![alt text](image-2.png)

进入此界面（在线模式对于多人共同协作PCB设计是更加友好的）
![alt text](image-3.png)

创建工程自动进入，显示这个界面（右边是灰色的无显示这是正常现象）
![alt text](image-4.png)

双击Schematic 1选项进入原理图绘制界面（可能有细微区别，不本质）
![alt text](image-5.png)

蓝色框选部分就是最重要的**绘制原理图**的地方，基本上可以当成Multisim或者Cadence的电路图这样去设计，后面也会具体介绍。

红色部分是嘉立创EDA最伟大的一个功能，因为嘉立创具有非常大量的元器件，所以你可以在这里找到各种需要的元器件。首先从“嘉立创EDA”切换到“**立创商城**”（红框内部最上面的部分可以看到），这里我随便找了一个村田的电容为例：
![alt text](image-6.png)
最右边的四张图从左上到右下依次是：原理图符号预览、PCB封装预览、实物3D预览、模拟3D预览

而可以看到选择的元器件详细标注了众多数据。这些数据中最重要的有6个，分别是封装、值、供应商编
号、库存（1 or 2个）、价格（1 or 2个）、描述（会介绍一些精度、额定电压、温度系数等重要信息）

---
# 4. 从立创商城中查询元器件—经典741为例
当然，如果你不知道想要的元器件在哪个分类中，或者不想在看起来浩如烟海的表项中碰运气，我们还可以从[立创商城(网站)](https://www.szlcsc.com/)中查询。比如这里我想设计一个施密特触发器，那么我们回忆电电的课程，我们**需要一个运放，两个电阻**。

那么我这里查询一个经典741运放（幻视glgg），可以看到有电电实验课程中使用到的DIP-8封装（**DIP封装是可以直接插到面包板上的封装**，8意思是其有8个引脚）的LM741-N（虽然课程中用到好像不是这个，是UA741，不过不本质）。
![alt text](image-7.png)

但是既然我们是设计PCB，就不再需要这种笨重且很**昂贵**的封装，我们选择ST的UA741CDT，最关键的参数在这里可以直接看到，但是如果我想要更进一步的了解，我们可以进入其界面，甚至可以看它的datasheet（如果你想了解实现原理，比如想再重温一下glgg的经典741放大电路的话x）

PS：如果你对这个封装的引脚定义不是很熟悉，可以从网上找解析的文章来学，也可以直接对着英文（大部分情况下）datasheet直接搜对应的部分（一般**简单的IC的datasheet第一面都会详细介绍引脚定义**）来学习。（部分国内厂家datasheet给的不全，遇到这种情况也不要为了省钱硬用，**暑假不该全花在硬设上，花在硬设上的时间也不应该是如此痛苦的**）

**注意⚠️**：选择元器件的时候一定要确定封装，**SOP、DIP这些封装都是焊接友好型**的，**QFN及其变体**封装一般都需要**熟练掌握**助焊剂、热风枪等的使用，非常**不推荐**大家选择。

![alt text](image-8.png)

![alt text](image-9.png)
（你是否还记得glgg如何分析这741电路的?Doge）
  
OK，我们找到了想要的元器件，现在如何在立创EDA中使用它呢？很简单，找到“商品编号”，复制这个“C7111”到EDA红色框选中的界面中的搜索栏（忘记了可以看上面的那张图），就可以看到找到了UA741CDT这个元器件了。
![alt text](image-10.png)

然后再加上一些符号之后（后面会有详细的介绍），一个简单的施密特触发器就成型了！
![alt text](image-11.png)

---
# 5. DRC检查(原理图阶段)
这样显然是不能用来制作PCB的，我们需要**从目前的“前端设计”转换到“后端版图”**，而在这之前，我们先要完成**原理图正确性的检验**，在整个界面的最底部，有一个“DRC”选项，DRC（Design Rule Checks）顾名思义，就是检查整个原理图设计是否满足设计规则，这里的规则可以在上边栏->设计->设计规则中进行修改，如下

![alt text](image-16.png)
这里我们不作任何修改，保持默认就好。

![[Pasted image 20250620235754.png]]

在DRC界面中点击“检查DRC”，我们会发现这里报了四个**警告（warning）**，和大家平时可能的“不遇到error不用管”的习惯不同，这里的warning还是很典型的，我们需要处理一下：

可以看到这里的warning全是一个类型：**某个端口是一个单网络，仅连接了一个元件引脚**。我们可以想象一下如果就这样我们把板子打出来，会是什么样：一个运放焊在PCB上，但是你惊讶的发现其没有能外联出来的端口，**想输入电压还要你拿着线怼在运放的一个焊盘上**，这样的场景简直就是高射炮打蚊子，根本无法利用到PCB的优势。所以我们还需要一些特殊器件把这些信号线、电源线等引出来，**方便我们输入和输出**。而我们将这些一般统称为**连接器**。**最经典的连接器就是排针和排母**。（课后习题(bushi)：其他的连接器大家也都可以去看看长什么样的，可以顺便对比思考一下它们和排针排母连接有什么优劣，这样也方便大家后面自己根据实际需要选择连接器）

![alt text](image-18.png)

![alt text](image-19.png)

比如我们从中找到一些排母用来输入输出（如下图），这样就能消除全部的warnings，想象一下实际的连接也是非常合理且完整的了。
![alt text](image-20.png)

---
# 6. 后端布线—初步介绍
验证无误，我们就可以进入同样好玩的后端布线环节了。点击上边框->设计->更新/转换原理图到PCB，我们会进入一个截然不同的界面。
![alt text](image-22.png)

在这里我们可以看到红色和黄色的部分，简单介绍一下**红色是焊盘**，也就是PCB中**能焊上锡的部分**（不过能焊上锡的还包括排针排母对应的灰色焊盘部分），同时也是**每个器件的端口**。**黄色是（顶层）丝印**，也就是在电电实验PCB上白色的字符部分，一般用于标注，*当然也能用来整活*：[灯光画项目](https://oshwhub.com/qazwsx1987/dengguanghua_0 )的实现效果如下：
![alt text](image-21.png)
项目视频链接在此：[视频链接](https://www.bilibili.com/video/BV1SC411B7Vx/?vd_source=74968f6e1742f0bfe5b63da7000daca0) 

言归正传，这里可以看到对应的各个元器件的**封装**，什么是封装？一个元器件的实际功能块（比如一块硅片）可能非常脆弱，各个IO接口之间的间距可能也非常小，一方面为了**保护元器件功能正常完整**，另一方面为了**将IO接口引出来**，需要对雏形的元器件做一些处理，形成保护电气连接的稳定性的外壳和引脚（焊盘），这就是对封装的简单理解。

---
# 7. 后端布线—放置板框和元器件
在连线和放置元器件之前，我们首先需要放置一个**板框**，也就是我们最后要打出来的实际板子。我们已经见了非常多的矩形PCB，*不妨设计一个圆形PCB*（后面如果大家想要自己设计电机驱动，圆形PCB也会是很常见的选项，不过都是后面大家自己设计的事情了）

放置板框具体是上边框->放置->边框->圆形，然后先点一个点确定圆形，再拖动鼠标确定半径。确定之后可以**使用鼠标右键快速取消当前状态（取消连续放置）**
![alt text](image-23.png)
然后这个板框（默认都是紫色边框），板框内就是最终能打出来的PCB板子

（这里我设置的半径为1.5cm，这里要**密切注意当前单位，EDA中有两套单位，分别是mm的国际单位以及mil毫英寸单位制**，换算关系为$1 mil=0.0254 mm$）所以这个板子其实打出来会很小
![alt text](image-24.png)

那么接下来就是将元器件放在合适的位置并且正确的连接线。这一步比较重要，因为会很大程度上影响你下一步的初始走线是否简洁，尽量让要**尽可能多的**要连接的焊盘**离的尽可能近**（当然这里如说，还是比较看个人经验的）
这里我选择这么放置：（*时空警察* 回来通知一下，后面我换了一下电阻的位置，所以这个初始放置也并没有那么重要，大家也不要因为想放一个完美的初始布局而纠结犹豫半天，优雅简洁的布局绝大多数都是不断迭代来的）
![alt text](image-25.png)
一方面是尽量保证对称，另一方面大家可以注意到我会旋转一些元器件的方向（**快捷键：空格Space**），从而尽可能保证**相同的端口号的焊盘（意味着这些焊盘需要连接在一起）** 靠的尽可能近。

拉远了看是这样的：
![alt text](image-26.png)

---
# 8.后端布线—推荐设置和注意事项

接下来就是开始布线：最复杂的方法是上边框->布线->单路布线，当然一般使用快捷键（**默认快捷键是Alt+W**，wire嘛），我们进入布线状态，点击随便一个焊盘，比如这里我点击了IN-端口，会**自动高亮其他的所有IN-端口**，这意味着我最终一定需要把这些焊盘连接在一起。

这里我**推荐大家设置45%线条延伸模式**（**应该也是默认模式**），具体设置方式如下图：
![alt text](image-27.png)

  当然其他模式其实也不是完全不可行，比如直角布线目前的制造工艺以及目前的应用场景（低频场景）下负面影响也可以接受，但是习惯这些可能会让你显得不太专业...
（后面所有布线操作遵循45%线条模式）

这是IN-布线的参考样例：
![alt text](image-29.png)
可以发现我这边**尽可能减少了折线段的长度和数量，因为我们希望线段越短越好，可以尽可能减少信号的噪声和衰减。**

接下来我们来考虑GND，绝大部分情况我们都会**推荐大家至少留一层作为地平面**，在这个简单的样例中对应的就是我们会考虑将整个底层和顶层（目前是顶层），也就是目前两个面都作为地平面，这样可以提供尽可能低的阻抗路径，减少地线上的压降和电磁干扰。不过**因为整层铺铜会极大的影响PCB布线的可观性，我们一般会最后再整层整层的铺铜**，这里我们首先大致确定一下哪些地方的GND需要打通孔才能连接到底层。

![alt text](image-30.png)
上图标注出的三个GND端口，绿色端口已经是打好的通孔（排母焊接必须要的通孔），紫色标记的是目前仍只在顶层的GND，所以我们需要打一个通孔将其连接到底层。有同学可能认为我们会直接打通孔在这个焊盘上，但是我们十分**不推荐**这样：第一，这种打孔方法容易导致虚焊；第二，这种**对于更小的封装（焊盘更小）是非常不适合的**，在0603封装情况下可能还好，但是如果0402甚至更小的封装，这种打孔就是非常不规范的了。
PS：因为我们最后两层都会作为GND平面，所以**这里的通孔本质上也可以不需要**，这里我作为一个例子给大家介绍通孔的使用。
![alt text](image-31.png)

选择第二层顶边栏->过孔（图形）
如上，我们打好了一个通孔，但是网络默认不是GND，我们应该在点击这个通孔，右边栏会跳转到其“属性”栏，点击“网络”，输入或者选择“GND”即可。
![alt text](image-32.png)

然后我们简单连接一下这两个GND即可。这里有个小技巧，如果你对美观程度要求比较高，想让连接完全笔直（or尽可能笔直），可以先从焊盘开始竖直地引下来一段线，再点击焊盘，焊盘就可以**自动吸附**在这段线的边缘。

接着我们需要考虑电源网络，这里我们有两个电源网络，假设我们设定的电压分别是+10V和-10V，分别对应VCC和VNN（命名是随意的，没有本质影响）
电源线布线需要考虑几点：
1. 宽线布线，和**普通的信号线默认是10min甚至更窄的线宽**相比，**电源线因为一般需要承载更大的电流**，产生更大的热量，会需要更宽的线宽，甚至对有的情况下我们需要使用铺铜。这里我们就会展示如何铺铜进行连接。
2. 远离高频信号线，电源线应该尽可能远离高频信号线，防止电源噪声耦合到信号线上。这里因为我们认为IN-不会非常高频，就不考虑这个问题。
3. 去耦电容，如果是**提供给芯片的电源线，就需要尽可能保证提供的电源稳定性**，毕竟谁也不想见到自己的芯片时不时因为电压波动重启一下。这里因为电源通路都非常的短且我们使用铺铜连接，所以电压降会很小，我们就不考虑使用去耦电容了。（为什么去耦电容能实现其功能？一个简单的电电随堂题x）

下面介绍如何铺铜：上边栏->放置->铺铜->矩形（实际上一般没法用一个矩形完成，会用多边形），不过先展示一下矩形的画法
（或者第二上边栏->铺铜图标->选择要的铺铜模式）
![alt text](image-33.png)
![alt text](image-34.png)

点击鼠标左键确认，出现这样的界面:
![alt text](image-35.png)

点击确认，但是我们会发现其生成的连接效果有点差，占用面积也非常大
![alt text](image-36.png)

当然这种占用面积可以使用多边形直接解决，不过我个人的习惯是先用较大的线宽从起始点和终点各引出一段，然后使用多边形尽可能适当的去铺铜。至于多大的线宽合适，有一个嘉立创自己的[专用计算器](https://www.jlc-fpc.com/enterpriseDynamic/q7i49142.html)（这里是一个JLC提供的**特殊计算器合集**，找到这个帖子的第二节“电流与线宽计算器”，或者从嘉立创FPC公众号中找到FPC设计->线宽计算工具），这里推荐的线宽不会收到线长的影响（我的尝试显示），所以我们可以在线长部分使用其默认值1m。
如果只需要给个范围，我们会在范围中选择尽可能大的值，那么也可以查阅下面的表格：
![alt text](image-37.png) （注意截图中最后的“被”其实应该是“倍”）

言归正传，我这里给出了一个铺铜样例：
![alt text](image-38.png)
注意绿色圆圈标记，这个就是我们确定多边形的关键点。这里我给大家的建议是沿着顺时针or逆时针方向依次确定关键点，这样整个过程会更加舒服x
当然，这种铺铜**其实没有完全发挥出铺铜面积大的优势**（目前我们其实和直接用20mil的线连接没有本质区别x），我们可以**在连接点设置喇叭形的接点，中间铺铜区域宽度能更大一些**（不过这里就不做了）
类似的将VCC连接上（这里方便直接用线连接了，因为这里的电流也不会很大），**这里我将R2换到了741的上面**，在布线的时候这种部分的移位也是非常正常的，只要能最方便自己布线即可。
![alt text](image-39.png)

电源线布完之后，接下来是信号线。简单的分类，信号线可以分为低频信号线和高频信号线。这里我们完全可以认为IN-和OUT是低频信号线，因为一般我们认为的高频信号线是USB、HDMI这种几百MHz甚至GHz的信号线。高频信号线是需要使用差分对方法来布线的，差分对布线方法后面会举例详细介绍。（附录A）

在我们这个样例中，布完的信号线如下图高亮部分所示：
![alt text](image-40.png)

可以看到左边这个"$1N193"网络有两个要连接的焊盘，这里推荐大家使用这种**尽可能将两条线分开**的办法进行连接，而**不要使用**可能会出现直角甚至锐角的情况，比如这样：
![alt text](image-41.png)

剩下的还有给GND铺铜，但是在铺铜之前，我们要**添加“泪滴”**，具体操作是上边栏->工具->泪滴
![alt text](image-62.png)

弹出的这个界面可以全部维持默认，点击确定：
![alt text](image-63.png)
从这个展示界面我们也可以看出来，“泪滴”主要的作用是在布线和焊盘连接处的地方增加一个线宽渐变的效果，一般可以增强导线和焊盘的连接强度，同时减少因为导通宽度陡增带来的阻抗不匹配等影响

OK，这样我们应该只剩下GND还没有完全连接起来。布线阶段的正确性也可以使用DRC检查来确定：还是下边栏->DRC->检查DRC。检查结果是有“连接性错误”，仔细看，的确全是GND，这的确意味着只有GND没有连接在一起了。那么我们开始铺铜吧。
![[Pasted image 20250621094621.png]]

整块平面的铺铜非常建议使用矩形铺铜模式，只需要我们将整个板框框选起来就可以了，不在板框内的铺铜会被自动忽略
![alt text](image-42.png)

下面是顶层铺铜的结果：
![alt text](image-43.png)

接着我们切换到底层进行铺铜，看到布线界面下面有若干不同颜色的选项：
![alt text](微信图片_20250618181150.png)
蓝色框选部分就是在不同界面之间切换的选项，高亮的部分是我们当前所处的层：目前是顶层。我们切换到底层，并且同样铺一层铜
![alt text](image-44.png)
PS：尽量让不同层之间的铺铜矩形边不重叠，否则可能会对操作带来一些不便之处。
这样我们再次检查DRC，没有问题！这说明我们这块板子从正确性上已经得到了验证，是完全可以打出来的了。![alt text](image-45.png)

#时间警察 这里忘记了一个比较重要的步骤，在PCB上没有走线的部分添加一些过孔，这一步主要是为了增加散热，尤其是如果我们这边有一个电压变换元件，这一块需要在不影响布线的前提下多加一点过孔，防止积热（这种情况下后面打板的时候板厚也不要选太薄了，我之前打过0.8厚度的板子，是真的会烫伤手指x）

如果大家使用的元器件都是嘉立创中有的，那么还可以预览其3D模型：上边框->视图->3D预览，或者点击第二上边栏->3D，进入3D预览界面
![alt text](image-48.png)
![alt text](image-49.png)

可以放缩、移动视角等，观察整个的布局是否美观等等。

---
# 9. 后端布线—丝印标注
此外，**丝印的布置也是非常重要的一步**，毕竟谁也不想打样出来之后，还要对着电脑上的原理图看自己哪一块焊盘要贴什么元器件（但是我真干过这事），这就需要我们**不要轻易的删除丝印**（比如这个样例中的两个电阻是不对称的，那么我们就需要标注清楚对应电阻是R1还是R2），此外，在排母的各个引脚上，我们也应该**标注一些必要信息**，比如哪个是VCC、哪个是VNN、IN-在哪里、OUT和GND又是哪两个引脚等等。

  想要标注丝印，首先我们要**切换到丝印层**（关键！）（类比之前切换顶层和底层），然后点击上边栏->放置->文本或者第二上边栏的文字标识，弹出这个界面：
![alt text](image-56.png)

比如我们需要标注GND，输入文本“GND”，然后放置如下：
![alt text](image-57.png)
但是很显然，这里的GND太大了，我们需要设置一个更合适的大小，这里我推荐大家参考使用的标注元件的丝印标注尺寸：比如点击R1，右边属性栏显示如下：
![alt text](image-58.png)
可以看到推荐线宽6mil，高45mil（或者用mm单位，单位统一就行），那么我们也设置同样的参数，并放置在合适的位置：
![alt text](image-59.png)

OK，效果很不错，下面我们将所有需要标注的信息都标注出来吧。如果大家觉得每次设置参数很麻烦，这里可以在 *弹出界面* 的输入文字的下方**直接设置6mil线宽，45mil高度，这里的设置是有记忆性的**。
![alt text](image-60.png)

---
# 10. 导出Gerber文件
这样我们就基本设计好了一个非常直观易用的施密特触发器（或许下学期电电实验2大家可以试着用一用我们设计的这一个小模块）
那么我们应该如何把设计的这样一个小模块制造出来呢？首先我们需要导出一个Gerber文件，上边框->导出->PCB制板文件（Gerber）
![alt text](image-46.png)
点击进入如此的界面：
![alt text](image-47.png)

随便起个名字就行，推荐默认的一键导出（从来没用过自定义配置x），然后选择导出Gerber文件，保存即可
![alt text](image-50.png)

接着打开立创下单助手，选择PCB/FPC下单，在加载的界面选择上传PCB/FPC下单
![alt text](image-51.png)

上传之后的文件会自动进行解析，解析完成后我们可以选择板子数量和板子层数（这里可能因为未知bug导致看起来好像解析失败了一样，其实是**可以正常往下走**的）
![alt text](image-52.png)

点击立即下单，进入此界面：
![alt text](image-53.png)

一般我们**选择FR-4板材**。下面是推荐的一些工艺配置：
1. 基本信息方面，如果设计的比较复杂，可以考虑选择确认生产稿，但是需要你及时去沟通，不然就会拖慢你的打板进度 ，如果很简单也没必要确认生产稿。其他部分推荐维持默认。
2. PCB工艺方面：
	1. 如果你画了多个板子在一起，就是拼版，否则就是单片。拼版会涉及到缝合孔之类的问题，新手不推荐使用。
	2. 成品板厚根据实际需求选择的，如果对体积要求高，选薄一点，如果对强度要求高，选厚一点。
	3. 外层铜厚建议维持默认。
	4. 阻焊颜色看你的个人喜好。
	5. 阻焊覆盖推荐维持默认。
	6. 焊盘喷镀这一项，如果你没有用免费券，就选择喷锡（无铅or有铅），因为沉金会有点贵。但如果用免费券（沉金免费券，那就大胆用吧，沉金实在太好看了x）

3. 个性化服务一块，推荐维持默认，按标准合同处理（不额外收费）
其他部分根据个人需来设置，看起来很复杂的一律默认即可。
最后选择完这些配置，**记得看一眼开票**（**新用户肯定是没有设置发票的，这一点参考报销须知来填写就好**），以及**确认订单方式推荐是自动扣款并确认，不然可能会出现你忘记确认，浪费了两三天的情况**x

最后一般情况下五个板子这样的小批量打板，无铅是30左右，有铅是60左右，沉金是150左右。**切记切记，这时候不要直接付钱打板了**，我们开始讲“最重要”的一部分x，**如何领取免费打样券**

回到首页（“客户中心”），打开客户中心，有一个优惠券中心
![alt text](image-54.png)

进入优惠券中心的PCB免费券界面
![alt text](image-55.png)

  注意这里需要通过考试之后才能领取沉金专用券，这个考试整体还是非常好过的（只要过60就行），花个10分钟做一下就行。（这里推荐一个比较快速的技巧，*前面的多选基本上全是全选，后面展示其技术先进程度的，选最先进的选项x* ，大家看了题目就会知道为什么了hh）
OK，我们领取了免费券之后回到下单界面，使用优惠券，价格从140元变成0元，至此基本上我们的DemoProj就实现了从设计到打板的整个过程。
注意下单之后，要定期确定一下制造和运输状态，尽量别出现到了2~3天才发现的情况哦。

---
# Appendix 附录
因为上面的样例太简单了x，所以我们这里会补充介绍一些其他的常见的须知
## A. 差分对布线
### A.1 什么是差分对？为什么要有差分对？
差分传输是一种的信号传输的技术，**区别于传统的一根信号线一根地线的做法，差分传输在这两根线上都传输信号**，这两个信号的振幅相同，相位相反。在这两根线上的传输的信号就是差分信号。**信号接收端比较这两个电压的差值来判断发送端发送的是逻辑0还是逻辑1**。在电路板上，差分走线必须是等长、等宽、紧密靠近、且在同一层面的两根线。（定义是如此，但是实际执行中，**不同要求的优先级有先后，后面在布线须知部分会更详细地介绍**）
使用差分传输的信号一般类型有：DDR、USB、以太网、PCIE、SATA、HDMI、UART、CAN
（这里面大家可能**最可能碰到的就是USB的布线**，也算是这里面最简单的一个了x，而且其他的我也没有实际去布过线，如果大家感兴趣，可以查看附录E-推荐学习链接中的差分对布线部分）

### A.2 差分布线
##### A.2.0 开源项目的导入、使用开源项目的注意事项
因为大家日常生活中最可能遇到的差分布线情况就是USB的使用，因此我们就直接介绍一下USB的差分布线流程。
USB(Universal Serial Bus)是一种串行总线标准，用于连接计算机和外部设备。USB 2.0及一下的版本的差分对布线主要包括D+和D-两根信号线。大家身边的TypeC就是一种USB的物理接口规范，其可以包含USB2.0、USB3.x等实际协议。

因为USB3.x接口定义比较复杂 [博客园]([USB 3.0连接器引脚、接口定义及封装尺寸 - LiuYanYGZ - 博客园](https://www.cnblogs.com/LiuYanYGZ/p/9590650.html)) [wiki]([USB 3.0 - 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/USB_3.0))，这里我们只介绍USB2.0的布线，并且我以一个开源的USB2.0拓展坞为例：[超迷你版！！USB HUB！ - 立创开源硬件平台](https://oshwhub.com/ylyangling/chao-mi-ni-ban-USB-HUB)

想要将这个工程导入到本地方便详细学习，先进入此项目主页，点击”打开设计图“，会进入设计图界面，因为这个工程也是专业版设计的，所以导出导入会非常方便
![[Pasted image 20250621104102.png]]
这里显示我们想要编辑需要先保存到本地
![[Pasted image 20250621104221.png]]
右键点击左侧边栏的”1已验证工程“，选择”文档另存为(本地)“，给个名字保存到本地即可。

然后在立创EDA中上边栏->文件->导入->嘉立创EDA(专业版)
![[Pasted image 20250621104338.png]]
选择刚才下载的文件，导入即可
![[Pasted image 20250621104440.png]]
推荐设置维持默认:
![[Pasted image 20250621104458.png]]
填一个方便分辨的名字：（这里我没动名字，大家可以随意填）
![[Pasted image 20250621104510.png]]

**注意⚠️：如果您的参赛项目有参考网上已开源项目，请务必标记参考部分以及自身队伍贡献！！！单纯复刻一个项目来参加比赛即使在开源协议中允许，评委也会酌情扣除相关评分**
**注意⚠️：如果引用开源项目，请注意其开源协议类型，不同协议类型要求不同，请遵守对应协议要求**
比如这里的项目，作者使用了GPL3.0协议，意味着任何基于其开发的项目必须同样开源且遵循GPL3.0协议。

#### A.2.1 定义差分对

我画了一个非常简化的结构，主要内容就是最基本的USB2.0输入和SL2.1A这一块USB集线芯片
![[Pasted image 20250621112950.png]]
大致放置一下结构如下：（涉及到一些晶振的放置，附录C会进一步介绍，因此这里我们就不给晶振布线了）
![[Pasted image 20250621112840.png]]

接下来想要差分布线，第一步一定是定义一个差分对：这里显然我们定义的是D-1和D+1和SL2.1A的IND+和IND-，不过我们主要介绍D-1和D+1的差分布线：

第一种方法是：上边栏->设计->差分对管理器
![[Pasted image 20250621113409.png]]

进入差分对管理界面：取一个差分对名字（左边），右边选择正网络和负网络（可以搜索也可以点击选择网络图上直接选取）
![[Pasted image 20250621113710.png]]
确认就会生成一个差分对，注意要添加差分对一定要先点击”+“按钮，不然永远是在这一个差分对中修改。
![[Pasted image 20250621113813.png]]

第二种方法是直接点击上边栏->布线->差分对布线，点击D+1 or D-1，如果此时没有差分对，就会弹出新建差分对窗口，后续就和上面基本一致了。
![[Pasted image 20250621113954.png]]

#### A.2.2 差分布线实例以及注意事项
新建好了差分对，我们现在重新选择差分对布线，点击任意一个焊盘，就会自动形成一条差分对布线，会实时显示目前是否满足差分对布线要求——两条线的长度误差要在±10mil之内。
![[Pasted image 20250621114155.png]]

最终效果如下：
![[Pasted image 20250621115154.png]]

如果初步布线很难保证长度满足要求，需要后面自己手动调整（理论上可以使用布线->差分对等长调节功能实现，但是我从来没成功使用这个功能过x，可以留待有兴趣的同学拓展）

**注意⚠️：差分对布线须知**
1. 差分对布线**尽可能短**，并且差分对布线上**尽量不要有过孔**（所以如果有差分对布线，尽可能把差分对布线最先布好，后面再布哪些对过孔数量要求不高的信号线），如果实在无法避免过孔，最好保证一条线上不要超过两个过孔
2. 过孔放置一定要保证对称：
![[Pasted image 20250621114617.png]]
3. 差分对中如果有电阻/容、测试点，也应该**对称放置**，并且**避免出现锋利的布线转角**：
![[Pasted image 20250621114707.png]]
4. 差分对布线**优先级最高**的是保证**长度尽量一致**，其次是走向一致（虽然下面的图说是❌，但是和**前几个绝对不要出现**相比，这个容忍度高很多，因为**线长一致是最重要**的）
![[Pasted image 20250621114944.png]]

---
## B. 多层板设计
我们推荐大家设计PCB的时候尽可能使用两层板，实在线过于复杂再去设置成四层板、六层板。一方面是成本问题，另一方面是少走过孔可以让大家整个的布线更加优雅、也更加稳定，也是不错的锻炼机会。

但是如果真的无法避免使用多层板，应该如何设置呢？
#### B.1 更改为多层板
多层板的设置非常简单，在后端界面，右侧图层界面的右上角有一个图层标识：（红色框选处）
![[Pasted image 20250621115957.png]]
点击进入图层管理器：
![[Pasted image 20250621120225.png]]
比如我们这里选择4层板：
![[Pasted image 20250621120252.png]]
这里有[信号层和内电层的区别]([图层管理器 | 嘉立创EDA专业版用户指南](https://prodocs.lceda.cn/cn/pcb/tools-layer-manager/index.html))，我个人从没有设置过内电层，所以这里不做介绍，中间两层维持默认的信号层属性即可。

这样我们就有多了两层可以用于信号线的走线 or/and 电源线的铺铜了。
![[Pasted image 20250621120553.png]]

#### B.2 多层线设置建议

一般情况下，我们建议大家在顶层和底层布信号线，中间的两层中，留一层整个铺铜GND，确保得到一个完整的地平面。另外一层可以辅助布一些电源线和一些布线要求低一些的信号线（比如一些低频信号线）

---
## C. MCU芯片放置
我觉得大家后面在PCB上继承一个MCU芯片的可能性还是比较大，但是因为MCU芯片布线会带来明显的cost，所以我在这里单独介绍。
这里主要介绍芯片的去耦电容和外部晶振如何放置。除了这两部分，其他的还是比较正常的布线即可。

要放置一个MCU，一定要看看给的datasheet，最好弄明白自己要哪些接口，用不到的可以用非连接标识先Ban掉（或者同学们可以留几个接口出来，这个无所谓）
#### C.1 去耦电容
芯片需要外部的供电，而且我们希望这个供电应该尽可能的稳定，因此我们需要**在给芯片供电之前，先经过去耦电容**将电压变得稳定一些。（为了保证稳定，甚至会有一些设计在芯片电源输入之前使用一个电压变换芯片，不过更常见的还是使用一些去耦电容，具体参数datasheet一般会有，如果没提到，建议上网搜一下x）既然要先过电容再输入芯片，我们要**保证去耦电容贴近芯片引脚放置，并且需要就近接地**。防止走线过长压降明显。

有时候datasheet会建议**多个去耦电容并联**，这个时候**小容量电容需要更靠近芯片电源引脚**。
#### C.2 外部晶振
虽然说很多IC会自带一个晶振，但是自带的晶振可能因为温度、自身复杂度较低等问题导致精度不够、经常漂移。此外还是有一些芯片不是自带晶振的，这些情况我们就需要增加一个外部晶振提供稳定的时钟信号。
##### C.2.1 选择合适的晶振和负载电容
晶振分为无源晶振和有源晶振。**无源晶振需要晶振外部接一些负载电容**，而**有源晶振一般不需要外部再接电容**，直连MCU即用。因此有源晶振一般要稍贵一些。
确定了有无源，晶振最重要的参数是频率，选择频率需要按照你选择的IC的datasheet推荐晶振频率来决定。
这里我选择布线稍微复杂一些的无源晶振，配合STM32F103（STM32系列是另一套编程逻辑，相对复杂，这里**单纯用这个芯片做一个晶振布线的示范**）。

查看datasheet，STM32F103有OSC_IN/OUT和OSC32_IN/OUT，前者用于提供主时钟，一般选择8MHz晶振，后者提供计时时钟，一般选择[32.768kHz晶振]([(4 封私信) 浅谈32.768KHz的重要性 - 知乎](https://zhuanlan.zhihu.com/p/393244996))。这里我们以布线主时钟为例。我选择了X49SD8MSD2SC这一款无源晶振（特地选了一款~~复古~~插针式的，同学们自己选的时候选体积更小更方便的贴片式即可），查看其datasheet可以看到负载电容推荐12pF or 20pF
![[Pasted image 20250621133620.png]]
然后就是非常简单的原理图绘制：
![[Pasted image 20250621133529.png]]
##### C.2.2 晶振布线须知
关于外部晶振电路的放置，需要**远离板框边缘，远离发热量大的元件**。板框边缘磕碰概率比较高，发热量大的元件（比如一些电压变换元件就是经典的发热量巨大的元器件）造成的温度变化很影响晶振振荡频率。
晶振的外部电路（比如datasheet中推荐的外部电路的电容电阻等元器件应当靠近晶振摆放）。
晶振电路走线尽量短且直、尽量不要使用过孔。
PS：晶振布线不要求差分对，可以追求一下对称美，但是不本质
粗略布线如下：
![[Pasted image 20250621134135.png]]

此外，还**建议**做包地措施（晶振电路周围放置接地的保护环），以及推荐设置禁止区。（整体设计如下）
![[Pasted image 20250621134700.png]]
不过其实也不是那么必要，有很多项目没做这个，还是照样能正常work，大家自行斟酌即可。

PS：其实大部分晶振电路鲁棒性还是比较高的，大家**设计的时候不用太担心**。

### C.3 一些题外话
这两个都是ESP系列的芯片：
![[Pasted image 20250621135937.png]]
左侧这个是没有外部晶振输入的，这是因为这个是一个非常集成的无线Wifi芯片，其上面已经集成了晶振、Flahs、Wifi天线等部件：
![[Pasted image 20250621140148.png]]
![[Pasted image 20250621140346.png]]
右边这个是一个单纯的芯片，还需要挺多的部件才能正常工作x
![[Pasted image 20250621140019.png]]
如果同学们想要使用ESP32，这里还是建议用上面那个集成好了的x，实在方便一些。（主要是下面那个还要自己设计天线(?probably)以及晶振、flash这些东西，还是有点麻烦的）

---
## D. 如何创建你自己的器件？（**不推荐**）
为什么我个人不推荐创建自己的器件？因为本质上你想创建一个符合规范的封装，是需要查找对应的datasheet的，但是如果你真的查到了datasheet，那么大概率你是能找到平替的（可能嘉立创商城中没有，但是可以复制这个商品的名称拿到淘宝、阿里巴巴x等平台去搜）。emmm，所以我个人觉得绝大部分同学应该用不到这一步，如果有同学对此非常感兴趣的话，推荐大家可以看这个[视频](https://www.bilibili.com/video/BV1At421h7Ui?spm_id_from=333.788.videopod.episodes&vd_source=74968f6e1742f0bfe5b63da7000daca0&p=17)：

---
## E. 推荐学习链接
### E.1 差分对布线：
HDMI：[PCB模块化设计06——HDMI接口PCB布局布线设计规范_hdmi布线规则-CSDN博客](https://blog.csdn.net/qq_31444421/article/details/129807572)
[三分钟带你看懂HDMI接口的PCB设计_hdmi阻抗匹配-CSDN博客](https://blog.csdn.net/qq_37457748/article/details/97617285?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167993725416800217269496%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=167993725416800217269496&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-97617285-null-null.142%5Ev76%5Ewechat,201%5Ev4%5Eadd_ask,239%5Ev2%5Einsert_chatgpt&utm_term=HDMI%E6%8E%A5%E5%8F%A3PCB%E5%B8%83%E5%B1%80%E5%B8%83%E7%BA%BF%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83&spm=1018.2226.3001.4187)

CAN：[ CAN总线标准接口与布线规范 - 知乎](https://zhuanlan.zhihu.com/p/34333969)
[31cedbec0dce7818842f5e19c37e1333.pdf](http://www.fourstar-dy.com/uploads/files/20230911/31cedbec0dce7818842f5e19c37e1333.pdf)

### E.2 你的同学and the Internet~
never be shy to ask your classmates, never be hesitant to search on the Internet

# Ending: 寄语
在整个讲义的编写过程中，我也纠结过到底怎么才能更好的带着大家过一遍整个的PCB设计流程，最终我选择了施密特触发器，这个同时出现在电电和电电实验中的简单电路，我希望可以在流程介绍中少讲一些复杂的知识，更专注于整个的设计和打板流程，将那些更加复杂的布线建议放在了附录部分。因为很多时候PCB最大、最直接的作用就是绘制一个**拓展板**（比如下图就是一个简单的拓展板样例），**实现比杜邦线连接稳定无数倍、简洁无数倍的连接**，而拓展板一般是非常简单的电路。这也是我的一个小尝试，希望同学们能喜欢这种风格。
![[Pasted image 20250622003648.png]]
此外，这个讲义其实也只是涉及到PCB设计的冰山一角，PCB设计是一个非常复杂的工程，涉及到很多的专业知识和经验积累。希望同学们在学习过程中能够**多动手实践**，多请教老师和同学，积累经验，不断提高自己的PCB设计水平。如果大家在过程中发现能**和电电学到的一些知识联系起来**，也能相互印证，让大家更加了解电电在实际生活中的广泛引用。

# Please
如果有具体设计细节的问题，请大家**总结好想问的问题之后再提问**，备完这节课后面我还有龙芯杯要打，**很可能没有时间一一回答**，如有问题请用尽可能**明白详细**的语言表述之，觉得可以问GPT老师的也能先直接问一下G老师。在这里我提前**谢谢各位同学的理解！**